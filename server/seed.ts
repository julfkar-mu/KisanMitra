// Load environment variables
import 'dotenv/config';
import { db } from './db';
import { crops, diseases } from '../shared/schema';

async function seedDatabase() {
  console.log('üå± Starting database seeding...');

  try {
    // Seed crops
    console.log('üì¶ Seeding crops...');
    const cropData = [
      {
        nameHindi: '‡§ó‡•á‡§π‡•Ç‡§Ç',
        nameEnglish: 'Wheat',
        scientificName: 'Triticum aestivum',
        category: 'rabi',
        sowingTime: '‡§®‡§µ‡§Ç‡§¨‡§∞-‡§¶‡§ø‡§∏‡§Ç‡§¨‡§∞',
        temperature: '15-25¬∞C',
        waterRequirement: '400-500 ‡§Æ‡§ø‡§Æ‡•Ä',
        imageUrl: 'https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b'
      },
      {
        nameHindi: '‡§ö‡§æ‡§µ‡§≤',
        nameEnglish: 'Rice',
        scientificName: 'Oryza sativa',
        category: 'kharif',
        sowingTime: '‡§ú‡•Ç‡§®-‡§ú‡•Å‡§≤‡§æ‡§à',
        temperature: '20-30¬∞C',
        waterRequirement: '1200-1500 ‡§Æ‡§ø‡§Æ‡•Ä',
        imageUrl: 'https://images.unsplash.com/photo-1536431311719-398b6704d4cc'
      },
      {
        nameHindi: '‡§ó‡§®‡•ç‡§®‡§æ',
        nameEnglish: 'Sugarcane',
        scientificName: 'Saccharum officinarum',
        category: 'cash_crop',
        sowingTime: '‡§Ö‡§ï‡•ç‡§ü‡•Ç‡§¨‡§∞-‡§®‡§µ‡§Ç‡§¨‡§∞',
        temperature: '20-35¬∞C',
        waterRequirement: '1500-2000 ‡§Æ‡§ø‡§Æ‡•Ä',
        imageUrl: 'https://images.unsplash.com/photo-1560493676-04071c5f467b'
      },
      {
        nameHindi: '‡§ï‡§™‡§æ‡§∏',
        nameEnglish: 'Cotton',
        scientificName: 'Gossypium hirsutum',
        category: 'kharif',
        sowingTime: '‡§Ö‡§™‡•ç‡§∞‡•à‡§≤-‡§Æ‡§à',
        temperature: '21-27¬∞C',
        waterRequirement: '500-800 ‡§Æ‡§ø‡§Æ‡•Ä',
        imageUrl: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96'
      },
      {
        nameHindi: '‡§Æ‡§ï‡•ç‡§ï‡§æ',
        nameEnglish: 'Maize',
        scientificName: 'Zea mays',
        category: 'kharif',
        sowingTime: '‡§ú‡•Ç‡§®-‡§ú‡•Å‡§≤‡§æ‡§à',
        temperature: '20-30¬∞C',
        waterRequirement: '500-800 ‡§Æ‡§ø‡§Æ‡•Ä',
        imageUrl: 'https://images.unsplash.com/photo-1605000797499-95a51c5269ae'
      },
      {
        nameHindi: '‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§®',
        nameEnglish: 'Soybean',
        scientificName: 'Glycine max',
        category: 'kharif',
        sowingTime: '‡§ú‡•Ç‡§®-‡§ú‡•Å‡§≤‡§æ‡§à',
        temperature: '20-30¬∞C',
        waterRequirement: '450-700 ‡§Æ‡§ø‡§Æ‡•Ä',
        imageUrl: 'https://images.unsplash.com/photo-1500651230702-0e2d8a49d4ad'
      }
    ];

    const insertedCrops = await db.insert(crops).values(cropData).returning();
    console.log(`‚úÖ Inserted ${insertedCrops.length} crops`);

    // Seed diseases for each crop
    console.log('ü¶† Seeding diseases...');
    const diseaseData = [];

    for (const crop of insertedCrops) {
      let diseaseInfo;
      
      switch (crop.nameEnglish) {
        case 'Wheat':
          diseaseInfo = {
            nameHindi: '‡§ó‡•á‡§π‡•Ç‡§Ç ‡§ï‡§æ ‡§∞‡§§‡•Å‡§Ü',
            nameEnglish: 'Wheat Rust',
            scientificName: 'Puccinia triticina',
            severity: 'medium' as const,
            type: 'fungal' as const,
            symptoms: {
              hindi: [
                '‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§®‡§æ‡§∞‡§Ç‡§ó‡•Ä-‡§≠‡•Ç‡§∞‡•á ‡§∞‡§Ç‡§ó ‡§ï‡•á ‡§õ‡•ã‡§ü‡•á ‡§ß‡§¨‡•ç‡§¨‡•á',
                '‡§ß‡§¨‡•ç‡§¨‡•á ‡§ß‡•Ä‡§∞‡•á-‡§ß‡•Ä‡§∞‡•á ‡§¨‡§°‡§º‡•á ‡§π‡•ã‡§§‡•á ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç',
                '‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡§æ‡§Ç ‡§™‡•Ä‡§≤‡•Ä ‡§™‡§°‡§º‡§ï‡§∞ ‡§∏‡•Ç‡§ñ‡§®‡•á ‡§≤‡§ó‡§§‡•Ä ‡§π‡•à‡§Ç'
              ],
              english: [
                'Small orange-brown spots on leaves',
                'Spots gradually increase in size',
                'Leaves turn yellow and dry up'
              ]
            },
            treatment: {
              hindi: [
                '‡§™‡•ç‡§∞‡•ã‡§™‡§ø‡§ï‡•ã‡§®‡§æ‡§ú‡§º‡•ã‡§≤ ‡§ï‡§æ ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ ‡§ï‡§∞‡•á‡§Ç',
                '‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§ø‡§§ ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§π‡§ü‡§æ‡§è‡§Ç',
                '10-15 ‡§¶‡§ø‡§® ‡§¨‡§æ‡§¶ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ'
              ],
              english: [
                'Spray propiconazole',
                'Remove infected leaves',
                'Repeat spray after 10-15 days'
              ]
            }
          };
          break;
        case 'Rice':
          diseaseInfo = {
            nameHindi: '‡§ß‡§æ‡§® ‡§ï‡§æ ‡§ù‡•Å‡§≤‡§∏‡§æ ‡§∞‡•ã‡§ó',
            nameEnglish: 'Rice Blast',
            scientificName: 'Magnaporthe oryzae',
            severity: 'high' as const,
            type: 'fungal' as const,
            symptoms: {
              hindi: [
                '‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§≠‡•Ç‡§∞‡•á ‡§ß‡§¨‡•ç‡§¨‡•á',
                '‡§ß‡§¨‡•ç‡§¨‡•ã‡§Ç ‡§ï‡•á ‡§ö‡§æ‡§∞‡•ã‡§Ç ‡§ì‡§∞ ‡§™‡•Ä‡§≤‡§æ ‡§ï‡§ø‡§®‡§æ‡§∞‡§æ',
                '‡§¨‡§æ‡§≤‡•Ä ‡§Æ‡•á‡§Ç ‡§¶‡§æ‡§®‡•á ‡§ï‡§æ‡§≤‡•á ‡§™‡§°‡§º ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç'
              ],
              english: [
                'Brown spots on leaves',
                'Yellow margins around spots',
                'Grains turn black in panicles'
              ]
            },
            treatment: {
              hindi: [
                '‡§ü‡•ç‡§∞‡§æ‡§á‡§∏‡§æ‡§á‡§ï‡•ç‡§≤‡§æ‡§ú‡•ã‡§≤ ‡§ï‡§æ ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ',
                '‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
                '‡§™‡•ç‡§∞‡§§‡§ø‡§∞‡•ã‡§ß‡•Ä ‡§ï‡§ø‡§∏‡•ç‡§Æ ‡§ï‡§æ ‡§ö‡•Å‡§®‡§æ‡§µ'
              ],
              english: [
                'Spray tricyclazole',
                'Control water levels',
                'Choose resistant varieties'
              ]
            }
          };
          break;
        case 'Cotton':
          diseaseInfo = {
            nameHindi: '‡§ï‡§™‡§æ‡§∏ ‡§ï‡§æ ‡§¨‡•â‡§≤‡§µ‡§∞‡•ç‡§Æ',
            nameEnglish: 'Bollworm',
            scientificName: 'Helicoverpa armigera',
            severity: 'high' as const,
            type: 'pest' as const,
            symptoms: {
              hindi: [
                '‡§´‡•Ç‡§≤‡•ã‡§Ç ‡§î‡§∞ ‡§´‡§≤‡§ø‡§Ø‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§õ‡•á‡§¶',
                '‡§ï‡•Ä‡§ü ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§®‡§æ',
                '‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§ï‡§ü‡§®‡§æ'
              ],
              english: [
                'Holes in flowers and bolls',
                'Visible larvae',
                'Leaf cutting damage'
              ]
            },
            treatment: {
              hindi: [
                '‡§¨‡•Ä‡§ü‡•Ä ‡§ï‡§™‡§æ‡§∏ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç',
                '‡§®‡•Ä‡§Æ ‡§ï‡§æ ‡§§‡•á‡§≤ ‡§õ‡§ø‡§°‡§º‡§ï‡•á‡§Ç',
                '‡§π‡§æ‡§• ‡§∏‡•á ‡§ï‡•Ä‡§ü ‡§™‡§ï‡§°‡§º‡§ï‡§∞ ‡§®‡§∑‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç'
              ],
              english: [
                'Use Bt cotton',
                'Spray neem oil',
                'Hand pick and destroy larvae'
              ]
            }
          };
          break;
        case 'Maize':
          diseaseInfo = {
            nameHindi: '‡§Æ‡§ï‡•ç‡§ï‡§æ ‡§ï‡§æ ‡§™‡§§‡•ç‡§§‡•Ä ‡§ù‡•Å‡§≤‡§∏‡§æ',
            nameEnglish: 'Leaf Blight',
            scientificName: 'Bipolaris maydis',
            severity: 'medium' as const,
            type: 'fungal' as const,
            symptoms: {
              hindi: [
                '‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§≤‡§Ç‡§¨‡•á ‡§ß‡§¨‡•ç‡§¨‡•á',
                '‡§ß‡§¨‡•ç‡§¨‡•á ‡§≠‡•Ç‡§∞‡•á ‡§∏‡•á ‡§ï‡§æ‡§≤‡•á ‡§∞‡§Ç‡§ó ‡§ï‡•á',
                '‡§™‡•å‡§ß‡•á ‡§ï‡•Ä ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§∞‡•Å‡§ï‡§®‡§æ'
              ],
              english: [
                'Long spots on leaves',
                'Brown to black colored spots',
                'Stunted plant growth'
              ]
            },
            treatment: {
              hindi: [
                '‡§Æ‡•à‡§Ç‡§ï‡•ã‡§ú‡•á‡§¨ ‡§ï‡§æ ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ',
                '‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§ø‡§§ ‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§π‡§ü‡§æ‡§è‡§Ç',
                '‡§´‡§∏‡§≤ ‡§ö‡§ï‡•ç‡§∞ ‡§Ö‡§™‡§®‡§æ‡§è‡§Ç'
              ],
              english: [
                'Spray mancozeb',
                'Remove infected leaves',
                'Follow crop rotation'
              ]
            }
          };
          break;
        default:
          diseaseInfo = {
            nameHindi: `${crop.nameHindi} ‡§ï‡§æ ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§∞‡•ã‡§ó`,
            nameEnglish: `${crop.nameEnglish} Common Disease`,
            scientificName: 'Various pathogens',
            severity: 'low' as const,
            type: 'fungal' as const,
            symptoms: {
              hindi: [
                '‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§ß‡§¨‡•ç‡§¨‡•á',
                '‡§™‡•Ä‡§≤‡•á ‡§Ø‡§æ ‡§≠‡•Ç‡§∞‡•á ‡§®‡§ø‡§∂‡§æ‡§®',
                '‡§™‡•å‡§ß‡•á ‡§ï‡•Ä ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø ‡§∞‡•Å‡§ï‡§®‡§æ'
              ],
              english: [
                'Spots on leaves',
                'Yellow or brown marks',
                'Stunted plant growth'
              ]
            },
            treatment: {
              hindi: [
                '‡§´‡§´‡•Ç‡§Ç‡§¶‡§®‡§æ‡§∂‡•Ä ‡§ï‡§æ ‡§õ‡§ø‡§°‡§º‡§ï‡§æ‡§µ',
                '‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§ø‡§§ ‡§≠‡§æ‡§ó‡•ã‡§Ç ‡§ï‡•ã ‡§π‡§ü‡§æ‡§è‡§Ç',
                '‡§â‡§ö‡§ø‡§§ ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤ ‡§ï‡§∞‡•á‡§Ç'
              ],
              english: [
                'Apply fungicide',
                'Remove infected parts',
                'Proper crop care'
              ]
            }
          };
      }

      diseaseData.push({
        cropId: crop.id,
        nameHindi: diseaseInfo.nameHindi,
        nameEnglish: diseaseInfo.nameEnglish,
        scientificName: diseaseInfo.scientificName,
        severity: diseaseInfo.severity,
        type: diseaseInfo.type,
        symptoms: diseaseInfo.symptoms,
        causes: {
          hindi: ['‡§Ö‡§ß‡§ø‡§ï ‡§®‡§Æ‡•Ä', '‡§ó‡§∞‡•ç‡§Æ ‡§Æ‡•å‡§∏‡§Æ', '‡§ñ‡§∞‡§æ‡§¨ ‡§ú‡§≤ ‡§®‡§ø‡§ï‡§æ‡§∏‡•Ä'],
          english: ['High humidity', 'Warm weather', 'Poor drainage']
        },
        treatment: diseaseInfo.treatment,
        prevention: {
          hindi: ['‡§™‡•ç‡§∞‡§§‡§ø‡§∞‡•ã‡§ß‡•Ä ‡§ï‡§ø‡§∏‡•ç‡§Æ‡•ã‡§Ç ‡§ï‡§æ ‡§ö‡•Å‡§®‡§æ‡§µ', '‡§â‡§ö‡§ø‡§§ ‡§´‡§∏‡§≤ ‡§ö‡§ï‡•ç‡§∞', '‡§ñ‡•á‡§§ ‡§ï‡•Ä ‡§∏‡§´‡§æ‡§à'],
          english: ['Choose resistant varieties', 'Proper crop rotation', 'Field sanitation']
        },
        images: [
          'https://images.unsplash.com/photo-1628126235206-5260b9ea6441',
          'https://images.unsplash.com/photo-1530836369250-ef72a3f5cda8',
          'https://images.unsplash.com/photo-1595576508898-0ad5c879a061'
        ]
      });
    }

    const insertedDiseases = await db.insert(diseases).values(diseaseData).returning();
    console.log(`‚úÖ Inserted ${insertedDiseases.length} diseases`);

    console.log('üéâ Database seeding completed successfully!');
    console.log(`üìä Summary:`);
    console.log(`   - Crops: ${insertedCrops.length}`);
    console.log(`   - Diseases: ${insertedDiseases.length}`);

  } catch (error) {
    console.error('‚ùå Error seeding database:', error);
    process.exit(1);
  }
}

// Run the seed function
seedDatabase()
  .then(() => {
    console.log('‚úÖ Seeding process completed');
    process.exit(0);
  })
  .catch((error) => {
    console.error('‚ùå Seeding failed:', error);
    process.exit(1);
  });